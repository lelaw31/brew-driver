<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css">

<script>
function computeD(data, width, height) {
    return "M0 300 L100 200 L200 20 L450 280";
}

function buildAxis(orientation, minVal, maxVal, ticks) {
    let axis = '<div class="' + orientation + '-axis">';
    const step = (maxVal - minVal) / (ticks - 1);
    for (let i=0; i<ticks; i++)
        axis = axis + '<div data-value="' + (minVal + step * i) + '"></div>';
    axis = axis + '</div>';
    return axis;
}

function renderLineCharts() {
    let lineCharts = document.getElementsByClassName("LineChart");
    for (let i=0; i<lineCharts.length; i++) {
        // get base parameters
        let chart = lineCharts[i];
        const style = getComputedStyle(chart);
        const chartWidth = style.width;
        const chartHeight = style.height;
        const data = eval(chart.getAttribute("data-curve1-values"));
        // compute view box
        // update chart
        chart.innerHTML = '<svg width="' + chartWidth + '" height="' + chartHeight + '">'
                        + '  <path d="' + computeD(30) + '"></path>'
                        + '</svg>'
                        + buildAxis("x", data.x.min, data.x.max, 5)
                        + buildAxis("y", data.y.min, data.y.max, 5);
    }
}

var testData = {
    x: {values: [0., 10., 20., 30., 40.]},
    y: {values: [10., 40., 30., 70., 0.]}
};
testData.x.min = testData.x.values.reduce( function(a,b) {return Math.min(a,b);} );
testData.x.max = testData.x.values.reduce( function(a,b) {return Math.max(a,b);} );
testData.y.min = testData.y.values.reduce( function(a,b) {return Math.min(a,b);} );
testData.y.max = testData.y.values.reduce( function(a,b) {return Math.max(a,b);} );

</script>

</head>

<body>
<div id="deb">bof</div>

<table border="1" style="width:500px; height:300px;">
<tr><td style="width: 40px"></td>
<td style="overflow: hidden">
<svg width="100%" height="100%">
  <path d="M0 300 L100 200 L200 20 L450 280"></path>
</svg>
</td>
</tr>
<tr style="height: 40px"><td></td><td></td></tr>
</table>

<div class="LineChart" style="width:500px; height:300px;" data-curve1-values="testData"></div>

<script>renderLineCharts(); document.getElementById("deb").innerHTML = testData.x.min;</script>

</body>

</html>
